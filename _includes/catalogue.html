{% assign programme = site.programmes 
  | where_exp: "programme", "programme.slug == include.lookup"
  | first
  | default: include
%}

<div class="catalogue-wrapper">
  <a
    {% if page.slug != programme.slug %}
      href="{{ programme.url | relative_url }}"
    {% endif %}
    class="catalogue"
    data-style="{{ include.style }}"
    aria-label="{{ programme.name | default: "programme link" }}"
  >
    <img
      src="{{ programme.image | relative_url }}"
      class="catalogue-image"
      alt="programme catalogue"
      loading="lazy"
      {% include fallback.html %}
    >

    {% if programme.name or programme.role or programme.description %}
      <span class="catalogue-text">
        {% if programme.name %}
          <span class="catalogue-name">
            {{ programme.name }}
          </span>
        {% endif %}

        {% if programme.role or programme.description %}
          <span class="catalogue-role">
            {% assign type = site.data.types[programme.role] %}
            {% include icon.html icon=type.icon %}
            <span>{{ programme.description | default: type.description }}</span>
          </span>
        {% endif %}
      </span>
    {% endif %}
  </a>
</div>
